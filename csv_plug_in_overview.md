## Overview on How the OneRoster Plug-In Works 

#### Initial Folder Upload and Validation
The OneRoster plug-in is designed to streamline the integration of CSV data into a Moodle environment using the OneRoster v1.1 specification. This plug-in works by allowing users to upload a ZIP file containing the required CSV files.The uploaded ZIP file is extracted and its contents including the ```manifest.csv```, ```classes.csv```, ```enrollments.csv```, ```users.csv```, ```orgs.csv```, ```orgs.csv```. 
<i>Note: any extra csv files will excluded from the processing phase of the plug-in. </i>

The manifest.csv file is validated to ensure that only the required files are marked as ```"bulk"``` or ```"delta"```. Any other files must be marked as ```"absent"```. If a file that is not required is marked with anything other than ```"absent"```, an error will be displayed on the screen, indicating improper configuration. If no errors are found in the ```manifest.csv``` validation, the plug-in proceeds to validate the headers and data types of the CSV files. During this step, each file is checked to ensure that all required headers are present and correctly formatted, and the data types for each column match the expected formats as per the OneRoster v1.1 specification. This ensures that all CSV data is properly structured and adheres to the system's requirements, preventing errors from occurring during the subsequent data processing steps. Only after successful header and data type validation does the system move forward with data extraction and processing.

#### Organisation Selection 
If the validation process passes successfully, the user is prompted to select an organization from the ```orgs.csv``` file. If there is only one organization available, the system automatically proceeds with that selection. The plug-in then processes the selected organization and synchronises the data with the backend system

Before synchronisation is begins, the plug-in includes a function called ```validate_user_data()``` to ensure that all users in ```users.csv``` have the necessary identifiers and passwords. This function iterates through the user data to check if each user entry contains a non-empty identifier and password. Only when all users meet the validation requirements does the function return ```true```, allowing the system to save the user data to the database. This step ensures that no errors occur and the integrity and completeness of user records before committing them to the system.

#### Synchronise
The synchronisation process in the OneRoster plug-in is responsible for executing commands to retrieve or update data based on the OneRoster v1.1 specification. The ```execute``` function takes a command, uses the command URL to determine the base path, and fetches or processes data accordingly. Depending on the base path (such as organizations, schools, or users), it either retrieves the requested data or updates it. It handles the organization, class, academic session, enrollment, and user data by iterating through the appropriate data keys, validating each data record, and ensuring that the properties are properly set. By creating a new ```execute``` function, this is able to take advantage of the pre-existing sychronise function for the API to sychronise the data with extra code.

By creating a new ```execute``` function, the OneRoster plug-in takes advantage of the existing API code to make the CSV processing. The ```execute``` function takes a command and uses its URL to determine the base path, which then fetches or processes data accordingly. This integration bridges the gap between the OneRoster API and the new OneRoster plug-in, allowing for CSV data to be validated, processed, and synchronised without relying on the OneRoster API.